<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GEC - Referral Projects</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    :root {
      --primary-green: #3DCD58;
      --header-bg: #fff;
      --nav-bg: #f4f4f4;
      --nav-active: var(--primary-green);
      --text-dark: #333;
      --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    header {
      background-color: var(--header-bg);
      background-image: url('images/header-bg.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #e0e0e0;
      position: relative;
    }

    /* Add an overlay to ensure text remains readable */
    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(255, 255, 255, 0.9);
      z-index: 0;
    }

    /* Ensure header content stays above the overlay */
    .logo-container, .search-container, .icons-container {
      position: relative;
      z-index: 1;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-container img {
      height: 40px;
    }

    .impact-logo {
      height: 24px;
    }

    .header-title {
      font-size: 24px;
      color: var(--primary-green);
      margin: 0 70px;
      white-space: nowrap;
      letter-spacing: 1px;
      word-spacing: 8px;
      font-family: var(--font-family);
    }

    .header-title strong {
      font-weight: bold;
    }

    .search-container {
      flex: 0 1 400px;
      margin-left: 20px;
      margin-right: 60px;
    }

    .search-box {
      width: 100%;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 15px;
      font-family: var(--font-family);
    }

    .icons-container {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .icon-link {
      color: #666;
      text-decoration: none;
      position: relative;
    }

    .icon-link img {
      width: 24px;
      height: 24px;
    }

    .main-nav {
      background-color: #f8f8f8;
      padding: 0;
      margin: 0;
      border-bottom: 1px solid #e0e0e0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      justify-content: flex-start;
      margin-bottom: 5px;
      align-items: center;
      background-color: #f8f8f8;
    }

    .nav-item {
      padding: 15px 25px;
      cursor: pointer;
      color: var(--text-dark);
      position: relative;
      font-family: var(--font-family);
    }

    .nav-item:hover,
    .nav-item.active {
      background-color: var(--primary-green);
      color: white;
    }

    .submenu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 1000;
      min-width: 200px;
    }

    .nav-item:hover .submenu {
      display: block;
    }

    #header-cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #dc3545;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
      min-width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .profile-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: #e0e0e0;
    }

    .pagination {
      display: flex;
      list-style: none;
      padding: 0;
      margin: 0;
      background-color: var(--nav-bg);
      border-radius: 4px;
      width: 100%;
      justify-content: center;
      gap: 15px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .dropdown {
      position: relative;
      flex: 0 1 170px;
      min-width: 150px;
      max-width: 170px;
      margin: 0;
    }

    .dropdown-btn {
      padding: 15px 8px;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-dark);
      font-size: 13px;
      transition: background-color 0.3s;
      width: 100%;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-family: var(--font-family);
    }

    .dropdown:hover .dropdown-btn {
      background-color: var(--primary-green);
      color: white;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      min-width: 400px;
      border-radius: 4px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .submenu-header {
      display: flex;
      background-color: rgba(244, 244, 244, 0.95);
      padding: 10px;
      border-bottom: 1px solid rgba(224, 224, 224, 0.3);
    }

    .submenu-title {
      flex: 1;
      text-align: center;
      padding: 8px;
      cursor: pointer;
      color: var(--text-dark);
      background-color: rgba(255, 255, 255, 0.5);
      border-radius: 4px;
      transition: all 0.3s ease;
      margin: 0 5px;
    }

    .submenu-title:hover {
      background-color: rgba(61, 205, 88, 0.9);
      color: white;
    }

    .pagination-bar {
      background-color: var(--nav-bg);
      padding: 8px 0;
      border-radius: 4px;
      margin-top: -10px;
      width: 100%;
      margin-right: 0;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
    }

    .pagination-settings {
      display: flex;
      justify-content: center;
      width: 100%;
      background-color: var(--nav-bg);
    }

    .pagination-container {
      display: flex;
      justify-content: center;
      width: 100%;
      padding: 0 20px;
      background-color: var(--nav-bg);
      margin: 0 auto;
    }

    .main-layout {
      padding: 0;
      width: 100%;
      background-color: var(--nav-bg);
    }

    .content-area {
      margin-top: -10px;
      width: 100%;
      padding: 0;
      background-color: var(--nav-bg);
    }

    .pagination-header {
      margin-top: 0;
      width: 100%;
      background-color: var(--nav-bg);
    }

    body {
      margin: 0;
      padding: 0;
      width: 100%;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
      background: transparent;
      font-family: var(--font-family);
    }

    .submenu-column a {
      color: var(--text-dark);
      text-decoration: none;
      padding: 12px 20px;
      display: block;
      transition: all 0.3s ease;
      font-size: 14px;
      border-radius: 4px;
      background-color: rgba(255, 255, 255, 0.3);
      font-family: var(--font-family);
    }

    .submenu-column a:hover {
      background-color: rgba(61, 205, 88, 0.9);
      color: white;
    }

    @media (max-width: 1200px) {
      .pagination {
        gap: 8px;
      }
      
      .dropdown {
        flex: 0 1 150px;
        min-width: 130px;
      }
    }

    @media (max-width: 992px) {
      .pagination {
        gap: 5px;
        flex-wrap: wrap;
      }
      
      .dropdown {
        flex: 0 1 140px;
        min-width: 110px;
      }

      .dropdown-btn {
        padding: 12px 6px;
        font-size: 12px;
      }
    }

    /* Add these new styles */
    .dropdown-content {
      min-width: 250px !important;  /* Adjusted for smaller menus */
    }

    .submenu-column {
      width: 100%;
      display: none;
      flex-direction: column;
    }

    .submenu-column a {
      padding: 12px 20px;
      color: var(--text-dark);
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 14px;
      border-radius: 4px;
    }

    .submenu-column a:hover {
      background-color: rgba(61, 205, 88, 0.9);
      color: white;
    }

    /* Update styles for BIM and Engineering Services dropdowns */
    .dropdown:nth-last-child(-n+2) .dropdown-content {
      transform: translateX(-25%);
      display: none;
      position: absolute;
      top: 100%;
      left: 50%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      min-width: 250px;
      border-radius: 4px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dropdown:nth-last-child(-n+2):hover .dropdown-content {
      display: block;
    }

    .dropdown:nth-last-child(-n+2) .submenu-body {
      background-color: rgba(255, 255, 255, 0.95);
      padding: 10px;
    }

    .dropdown:nth-last-child(-n+2) .submenu-column {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .dropdown:nth-last-child(-n+2) .submenu-column a {
      padding: 12px 20px;
      color: var(--text-dark);
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 14px;
      border-radius: 4px;
      background-color: rgba(255, 255, 255, 0.3);
    }

    .dropdown:nth-last-child(-n+2) .submenu-column a:hover {
      background-color: rgba(61, 205, 88, 0.9);
      color: white;
      box-shadow: 0 2px 8px rgba(61, 205, 88, 0.2);
    }

    /* Graphics columns specific styles */
    .graphics-column-3d,
    .graphics-column-2d {
      display: none;
    }

    .graphics-title[data-graphics-type="3d"]:hover ~ .graphics-column-3d,
    .graphics-title[data-graphics-type="2d"]:hover ~ .graphics-column-2d {
      display: flex;
    }

    /* Make sure all submenu items are consistently translucent */
    .submenu-column.graphics-column .submenu-column a,
    .submenu-column a {
      background-color: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(5px);
    }

    /* Add these styles at the beginning of the style section */
    .background-slideshow {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transform: translateX(100%);
      background-size: cover;
      background-position: center;
      animation: slideAnimation 25s infinite;
    }

    .slide:nth-child(1) {
      animation-delay: 0s;
    }
    .slide:nth-child(2) {
      animation-delay: 5s;
    }
    .slide:nth-child(3) {
      animation-delay: 10s;
    }
    .slide:nth-child(4) {
      animation-delay: 15s;
    }
    .slide:nth-child(5) {
      animation-delay: 20s;
    }

    @keyframes slideAnimation {
      0% {
        opacity: 0;
        transform: translateX(100%);
      }
      5% {
        opacity: 1;
        transform: translateX(0);
      }
      20% {
        opacity: 1;
        transform: translateX(0);
      }
      25% {
        opacity: 0;
        transform: translateX(-100%);
      }
      100% {
        opacity: 0;
        transform: translateX(-100%);
      }
    }

    /* Update the overlay to be more transparent */
    .content-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.65);
      z-index: -1;
    }

    .scrolling-message {
      flex: 1;
      overflow: hidden;
      white-space: nowrap;
      margin-left: 20px;
      position: relative;
    }

    .scrolling-text {
      display: inline-block;
      animation: scrollText 20s linear infinite;
      color: var(--primary-green);
      font-weight: 500;
      position: relative;
      padding-left: 100%;
      white-space: nowrap;
      font-family: var(--font-family);
    }

    @keyframes scrollText {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    /* Add styles for the cart count */
    #header-cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #dc3545;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
      min-width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    /* Add styles for contact dropdown */
    .contact-dropdown {
      display: none;
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      min-width: 250px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border-radius: 4px;
      z-index: 1000;
      margin-top: 10px;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .icon-link:hover .contact-dropdown,
    .contact-dropdown:hover {
      display: block;
      opacity: 1;
    }

    .contact-dropdown-item {
      padding: 12px 15px;
      color: var(--text-dark);
      text-decoration: none;
      display: block;
      border-bottom: 1px solid #eee;
      transition: all 0.3s ease;
    }

    .contact-dropdown-item:last-child {
      border-bottom: none;
    }

    .contact-dropdown-item:hover {
      background: var(--primary-green);
      color: white;
    }

    .contact-dropdown-header {
      padding: 12px 15px;
      font-weight: 500;
      color: var(--text-dark);
      background: #f8f8f8;
      border-bottom: 1px solid #eee;
    }

    .icon-link {
      position: relative;
      display: inline-block;
    }

    .icon-link img {
      width: 24px;
      height: 24px;
      transition: transform 0.3s ease;
    }

    /* Remove hover effect for cart icon */
    .icon-link:not(:has(img[alt="Cart"])):hover img {
      transform: scale(1.1);
    }

    /* Cart Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      position: relative;
      max-height: 80vh;
      overflow-y: auto;
      max-width: 1000px;
      width: 90%;
    }

    .close-modal {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
      color: #666;
    }

    .modal-title {
      margin: 0 0 20px 0;
      color: var(--text-dark);
      font-size: 24px;
      font-family: var(--font-family);
    }

    .cart-items {
      max-height: 600px;
      overflow-y: auto;
      margin: 20px 0;
    }

    .cart-item {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      gap: 20px;
    }

    .cart-item-image {
      width: 100px;
      height: 100px;
      flex-shrink: 0;
    }

    .cart-item-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .cart-item-details {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .cart-item-title {
      font-weight: 500;
      color: var(--text-dark);
      font-size: 16px;
    }

    .cart-item-path {
      color: #666;
      font-size: 14px;
    }

    .cart-item-price {
      color: var(--primary-green);
      font-weight: 500;
      font-size: 16px;
    }

    .cart-item-quantity {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0 20px;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      padding: 20px;
      border-top: 1px solid #eee;
      font-size: 20px;
      font-weight: 500;
      background: #f8f8f8;
    }

    .cart-total span:last-child {
      font-weight: 700;
      color: var(--primary-green);
    }

    .cart-actions {
      display: flex;
      gap: 10px;
      padding: 20px;
      border-top: 1px solid #eee;
      justify-content: space-between;
    }

    .checkout-btn, .clear-cart-btn {
      padding: 15px 30px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .checkout-btn {
      background: var(--primary-green);
      color: white;
      order: 2;
    }

    .clear-cart-btn {
      background: #dc3545;
      color: white;
      order: 1;
    }

    .checkout-btn:hover {
      background: #2dbd46;
      transform: translateY(-2px);
    }

    .clear-cart-btn:hover {
      background: #c82333;
      transform: translateY(-2px);
    }

    .empty-cart {
      text-align: center;
      padding: 40px;
      color: #666;
      font-size: 18px;
    }

    .remove-item {
      background: none;
      border: none;
      color: #dc3545;
      font-size: 24px;
      cursor: pointer;
      padding: 0 10px;
      transition: transform 0.3s ease;
    }

    .remove-item:hover {
      transform: scale(1.2);
    }

    .quantity-btn {
      background: var(--primary-green);
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .quantity-btn:hover {
      transform: scale(1.1);
      background: #2dbd46;
    }

    .quantity {
      min-width: 30px;
      text-align: center;
      font-weight: 500;
    }

    /* Add Checkout Form Modal Styles */
    .checkout-form-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1001;
      align-items: center;
      justify-content: center;
    }

    .checkout-form-modal.show {
      display: flex;
    }

    .checkout-form-content {
      background: white;
      padding: 30px;
      border-radius: 8px;
      width: 400px;
      max-width: 90%;
      position: relative;
    }

    .checkout-form-title {
      margin: 0 0 20px 0;
      color: var(--text-dark);
      font-size: 24px;
      text-align: center;
      font-family: var(--font-family);
    }

    .checkout-form-group {
      margin-bottom: 20px;
    }

    .checkout-form-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--text-dark);
      font-family: var(--font-family);
    }

    .checkout-form-group input,
    .checkout-form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    .checkout-form-submit {
      width: 100%;
      padding: 12px;
      background: var(--primary-green);
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .checkout-form-submit:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .success-message {
      display: none;
      text-align: center;
      color: var(--primary-green);
      font-size: 18px;
      margin-top: 20px;
    }

    .success-message.show {
      display: block;
    }

    .success-icon {
      font-size: 48px;
      margin-bottom: 10px;
    }

    /* Add BIM Services Modal Styles */
    .bim-services-content {
      padding: 20px;
      text-align: center;
    }

    .bim-services-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    .add-to-cart-btn:hover {
      background: #2dbd46 !important;
      transform: translateY(-2px);
    }

    /* Add styles for the cart note and info icon */
    .cart-note {
      padding: 10px 20px;
      text-align: center;
      color: #666;
      font-size: 12px;
      font-style: italic;
      border-top: 1px solid #eee;
    }

    .cart-note p {
      margin: 0;
    }

    .cart-info-icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      background: #999;
      color: white;
      border-radius: 50%;
      margin-left: 10px;
      font-size: 12px;
      cursor: help;
      transition: all 0.3s ease;
      vertical-align: middle;
      line-height: 20px;
      text-align: center;
    }

    .cart-info-icon:hover {
      transform: scale(1.1);
      background: #777;
    }

    .cart-info-icon::after {
      content: attr(title);
      position: absolute;
      left: 50%;
      top: 100%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      margin-top: 10px;
    }

    .cart-info-icon:hover::after {
      opacity: 1;
      visibility: visible;
    }

    .content-section {
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
    }

    .section-heading {
      font-size: 36px;
      color: var(--primary-green);
      margin-bottom: 30px;
      text-align: center;
    }

    .image-container {
      width: 100%;
      height: 400px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      margin-bottom: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .text-container {
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .text-container p {
      color: var(--text-dark);
      font-size: 16px;
      line-height: 1.6;
      margin: 0;
    }

    /* Folders Section Styles */
    .folders-container {
      padding: 20px;
      margin: 20px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .folders-container h2 {
      margin: 0 0 20px 0;
      color: var(--text-dark);
      font-size: 24px;
      font-family: var(--font-family);
      text-align: center;
    }

    .folder-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        padding: 20px;
    }

    .folder-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        background: white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        cursor: pointer;
        transition: transform 0.2s;
    }

    .folder-card:hover {
        transform: translateY(-2px);
    }

    .folder-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .folder-title {
        margin: 0;
        font-size: 18px;
        color: #333;
    }

    .folder-count {
        color: #666;
        font-size: 14px;
    }

    .folder-placeholder {
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f8f9fa;
        border-radius: 4px;
        margin-top: 10px;
        color: #666;
    }

    /* Modal styles */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
    }

    .modal-content {
        position: relative;
        background: white;
        margin: 50px auto;
        padding: 20px;
        max-width: 800px;
        max-height: 80vh;
        overflow-y: auto;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .close-modal {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 24px;
        cursor: pointer;
        color: #666;
        background: none;
        border: none;
        padding: 5px;
    }

    .modal-products {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .modal-product {
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10px;
        text-align: center;
    }

    .modal-product img {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 4px;
        margin-bottom: 10px;
    }

    .product-title {
        font-weight: bold;
        margin-bottom: 5px;
    }

    .product-hours {
        color: #666;
        font-size: 14px;
        margin-bottom: 10px;
    }

    .btn-add-to-cart {
        background: #007bff;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        width: 100%;
    }

    .btn-add-to-cart:hover {
        background: #0056b3;
    }
  </style>
</head>
<body>
  <!-- Add the background slideshow container right after body tag -->
  <div class="background-slideshow">
    <div class="slide" style="background-image: url('images/backgrounds/bg1.jpg');"></div>
    <div class="slide" style="background-image: url('images/backgrounds/bg2.jpg');"></div>
    <div class="slide" style="background-image: url('images/backgrounds/bg3.jpg');"></div>
    <div class="slide" style="background-image: url('images/backgrounds/bg4.jpg');"></div>
    <div class="slide" style="background-image: url('images/backgrounds/bg5.jpg');"></div>
  </div>
  <div class="content-overlay"></div>

  <!-- Background Container -->
  <div class="background-container"></div>

  <!-- Header -->
  <header>
    <div class="logo-container">
      <a href="index.html" style="text-decoration: none;">
        <img src="images/schneider-logo.png" alt="Schneider Electric Logo">
      </a>
      <a href="index.html" style="text-decoration: none;">
      <img src="images/impact-logo.png" alt="Impact Company" class="impact-logo">
      </a>
      <div class="header-title"><strong>Global Engineering Center</strong></div>
    </div>
    
    <div class="search-container">
      <input type="text" class="search-box" placeholder="Search for people, topics, tools etc">
    </div>

    <div class="icons-container">
      <a href="about-us.html" class="icon-link">
        <img src="images/About-us.png" alt="About Us" class="icon">
      </a>
      <div class="icon-link">
        <img src="images/Contact-us.png" alt="Contact Us" class="icon">
        <div class="contact-dropdown">
          <div class="contact-dropdown-header">Contact Information</div>
          <a href="mailto:regional@example.com" class="contact-dropdown-item">Regional spocs – regional@example.com – +1234567890</a>
          <a href="mailto:estimation@example.com" class="contact-dropdown-item">Estimation – estimation@example.com</a>
          <a href="mailto:software@example.com" class="contact-dropdown-item">Software – software@example.com</a>
          <a href="mailto:graphics@example.com" class="contact-dropdown-item">Graphics – graphics@example.com</a>
          <a href="mailto:engineering@example.com" class="contact-dropdown-item">Engineering – engineering@example.com</a>
          <a href="mailto:bim@example.com" class="contact-dropdown-item">BIM – bim@example.com</a>
        </div>
      </div>
      <div class="icon-link">
        <img src="images/cart.png" alt="Cart" class="icon">
        <span id="header-cart-count" style="display: none;">0</span>
      </div>

      <!-- Add cart modal -->
      <div class="modal" id="cartModal">
        <div class="modal-content" style="max-width: 1000px; width: 90%;">
          <span class="close-modal">&times;</span>
          <h2 class="modal-title">Shopping Cart <div class="cart-info-icon" title="Pre-requisites needed to get this deliverable">ⓘ</div></h2>
          <div class="cart-items">
            <!-- Cart items will be dynamically added here -->
          </div>
          <div class="cart-total">
            <span>Total Hours:</span>
            <span id="cart-total-hours">0</span>
          </div>
          <div class="cart-note">
            <p>Please note: These are indicative hours – may vary based on actual requirement and inputs provided</p>
          </div>
          <div class="cart-actions">
            <button class="checkout-btn">Checkout</button>
            <button class="clear-cart-btn">Clear Cart</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <nav class="main-nav">
    <ul class="nav-list">
      <li class="nav-item"><a href="page1.html" style="color: inherit; text-decoration: none;">Referral Projects</a></li>
      <li class="nav-item"><a href="page2.html" style="color: inherit; text-decoration: none;">Testimonials</a></li>
      <li class="nav-item"><a href="page3.html" style="color: inherit; text-decoration: none;">Feedbacks</a></li>
      <li class="nav-item"><a href="https://app.smartsheet.com/b/form/5ae57541fff44670a5dc240380cf23d1" style="color: inherit; text-decoration: none;">Request Form</a></li>
      <li class="nav-item"><a href="#" style="color: inherit; text-decoration: none;">Extra</a></li>
      <div class="scrolling-message">
        <div class="scrolling-text">This is a scrolling message and the message is scrolling This is a scrolling message and the message is scrolling This is a scrolling message and the message is scrolling</div>
      </div>
    </ul>
  </nav>

  <!-- Main Layout -->
  <div class="main-layout">
    <!-- Content Area -->
    <div class="content-area">
      <!-- Pagination Settings -->
      <div class="pagination-header">
        <div class="pagination-bar">
          <div class="pagination-settings">
            <div class="pagination-container">
              <ul class="pagination">

                <!-- Item 1 -->
                <li class="dropdown">
                  <button class="dropdown-btn">Health Care ▼</button>
                  <div class="dropdown-content">
                    <div class="submenu-header">
                      <span class="submenu-title graphics-title" data-graphics-type="3d">3D Graphics</span>
                      <span class="submenu-title graphics-title" data-graphics-type="2d">2D Graphics</span>
                    </div>
                    <div class="submenu-body">
                      <div class="submenu-column graphics-column graphics-column-3d">
                        <a href="category-page-1.html">Homepage and Navigation</a>
                        <a href="category-page-2.html">Floor Plans</a>
                        <a href="category-page-3.html">Equipments</a>
                        <a href="category-page-4.html">Summary Pages</a>
                        <a href="category-page-5.html">Dashboards</a>
                        <a href="category-page-6.html">SLD's</a>
                      </div>
                      <div class="submenu-column graphics-column graphics-column-2d">
                        <a href="category-page-7.html">Homepage and Navigation</a>
                        <a href="category-page-8.html">Floor Plans</a>
                        <a href="category-page-9.html">Equipments</a>
                        <a href="category-page-10.html">Summary Pages</a>
                        <a href="category-page-11.html">Dashboards</a>
                        <a href="category-page-12.html">SLD's</a>
                      </div>
                    </div>
                  </div>
                </li>
                <!-- Item 2 -->
                <li class="dropdown">
                  <button class="dropdown-btn">Datacenter ▼</button>
                  <div class="dropdown-content">
                    <div class="submenu-header">
                      <span class="submenu-title graphics-title" data-graphics-type="3d">3D Graphics</span>
                      <span class="submenu-title graphics-title" data-graphics-type="2d">2D Graphics</span>
                    </div>
                    <div class="submenu-body">
                      <div class="submenu-column graphics-column graphics-column-3d">
                        <a href="category-page-13.html">Homepage and Navigation</a>
                        <a href="category-page-14.html">Floor Plans</a>
                        <a href="category-page-15.html">Equipments</a>
                        <a href="category-page-16.html">Summary Pages</a>
                        <a href="category-page-17.html">Dashboards</a>
                        <a href="category-page-18.html">SLD's</a>
                      </div>
                      <div class="submenu-column graphics-column graphics-column-2d">
                        <a href="category-page-19.html">Homepage and Navigation</a>
                        <a href="category-page-20.html">Floor Plans</a>
                        <a href="category-page-21.html">Equipments</a>
                        <a href="category-page-22.html">Summary Pages</a>
                        <a href="category-page-23.html">Dashboards</a>
                        <a href="category-page-24.html">SLD's</a>
                      </div>
                    </div>
                  </div>
                </li>
                <!-- Item 3 -->
                <li class="dropdown">
                  <button class="dropdown-btn">Life Science ▼</button>
                  <div class="dropdown-content">
                    <div class="submenu-header">
                      <span class="submenu-title graphics-title" data-graphics-type="3d">3D Graphics</span>
                      <span class="submenu-title graphics-title" data-graphics-type="2d">2D Graphics</span>
                    </div>
                    <div class="submenu-body">
                      <div class="submenu-column graphics-column graphics-column-3d">
                        <a href="category-page-25.html">Homepage and Navigation</a>
                        <a href="category-page-26.html">Floor Plans</a>
                        <a href="category-page-27.html">Equipments</a>
                        <a href="category-page-28.html">Summary Pages</a>
                        <a href="category-page-29.html">Dashboards</a>
                        <a href="category-page-30.html">SLD's</a>
                      </div>
                      <div class="submenu-column graphics-column graphics-column-2d">
                        <a href="category-page-31.html">Homepage and Navigation</a>
                        <a href="category-page-32.html">Floor Plans</a>
                        <a href="category-page-33.html">Equipments</a>
                        <a href="category-page-34.html">Summary Pages</a>
                        <a href="category-page-35.html">Dashboards</a>
                        <a href="category-page-36.html">SLD's</a>
                      </div>
                    </div>
                  </div>
                </li>
                <!-- Item 4 -->
                <li class="dropdown">
                  <button class="dropdown-btn">Education ▼</button>
                  <div class="dropdown-content">
                    <div class="submenu-header">
                      <span class="submenu-title graphics-title" data-graphics-type="3d">3D Graphics</span>
                      <span class="submenu-title graphics-title" data-graphics-type="2d">2D Graphics</span>
                    </div>
                    <div class="submenu-body">
                      <div class="submenu-column graphics-column graphics-column-3d">
                        <a href="category-page-37.html">Homepage and Navigation</a>
                        <a href="category-page-38.html">Floor Plans</a>
                        <a href="category-page-39.html">Equipments</a>
                        <a href="category-page-40.html">Summary Pages</a>
                        <a href="category-page-41.html">Dashboards</a>
                        <a href="category-page-42.html">SLD's</a>
                      </div>
                      <div class="submenu-column graphics-column graphics-column-2d">
                        <a href="category-page-43.html">Homepage and Navigation</a>
                        <a href="category-page-44.html">Floor Plans</a>
                        <a href="category-page-45.html">Equipments</a>
                        <a href="category-page-46.html">Summary Pages</a>
                        <a href="category-page-47.html">Dashboards</a>
                        <a href="category-page-48.html">SLD's</a>
                      </div>
                    </div>
                  </div>
                </li>
                <!-- Item 5 -->
                <li class="dropdown">
                  <button class="dropdown-btn">Commercial ▼</button>
                  <div class="dropdown-content">
                    <div class="submenu-header">
                      <span class="submenu-title graphics-title" data-graphics-type="3d">3D Graphics</span>
                      <span class="submenu-title graphics-title" data-graphics-type="2d">2D Graphics</span>
                    </div>
                    <div class="submenu-body">
                      <div class="submenu-column graphics-column graphics-column-3d">
                        <a href="category-page-49.html">Homepage and Navigation</a>
                        <a href="category-page-50.html">Floor Plans</a>
                        <a href="category-page-51.html">Equipments</a>
                        <a href="category-page-52.html">Summary Pages</a>
                        <a href="category-page-53.html">Dashboards</a>
                        <a href="category-page-54.html">SLD's</a>
                      </div>
                      <div class="submenu-column graphics-column graphics-column-2d">
                        <a href="category-page-55.html">Homepage and Navigation</a>
                        <a href="category-page-56.html">Floor Plans</a>
                        <a href="category-page-57.html">Equipments</a>
                        <a href="category-page-58.html">Summary Pages</a>
                        <a href="category-page-59.html">Dashboards</a>
                        <a href="category-page-60.html">SLD's</a>
                      </div>
                    </div>
                  </div>
                </li>
                <!-- Item 6 -->
                <li class="dropdown">
                  <button class="dropdown-btn">BIM Services ▼</button>
                  <div class="dropdown-content">
                    <div class="submenu-body" style="padding: 10px;">
                      <div class="submenu-column">
                        <a href="#" class="time-material-link">Time and Material</a>
                      </div>
                    </div>
                  </div>
                </li>
                <!-- Item 7 -->
                <li class="dropdown">
                  <button class="dropdown-btn">Engineering Services ▼</button>
                  <div class="dropdown-content">
                    <div class="submenu-body" style="padding: 10px;">
                      <div class="submenu-column">
                        <a href="#" class="engg-time-material-link">Time and Material</a>
                        <a href="#" class="ebo-software-link">EBO Software Engineering</a>
                        <a href="#" class="graphics-engg-link">Graphics Engineering</a>
                        <a href="#" class="hardware-engg-link">Hardware Engineering</a>
                      </div>
                    </div>
                  </div>
                </li>

              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add checkout form modal -->
  <div class="checkout-form-modal" id="checkoutFormModal">
    <div class="checkout-form-content">
      <span class="close-modal">&times;</span>
      <h2 class="checkout-form-title">Checkout Details</h2>
      <form id="checkoutForm">
        <div class="checkout-form-group">
          <label for="email">Email ID</label>
          <input type="email" id="email" required>
        </div>
        <div class="checkout-form-group">
          <label for="branch">Branch</label>
          <select id="branch" required>
            <option value="">Select Branch</option>
            <option value="North">North</option>
            <option value="South">South</option>
            <option value="East">East</option>
            <option value="West">West</option>
          </select>
        </div>
        <div class="checkout-form-group">
          <label for="delivery">Estimated Delivery Expected</label>
          <input type="date" id="delivery" required>
        </div>
        <div class="checkout-form-group">
          <label for="contact">Contact Name</label>
          <input type="text" id="contact" required>
        </div>
        <button type="submit" class="checkout-form-submit">Submit</button>
      </form>
      <div class="success-message">
        <div class="success-icon">✓</div>
        <p>Order submitted successfully!</p>
      </div>
    </div>
  </div>

  <!-- Add BIM Services Modal -->
  <div class="modal" id="bimServicesModal">
    <div class="modal-content" style="max-width: 500px;">
      <span class="close-modal">&times;</span>
      <h2 class="modal-title">BIM Services - Time and Material</h2>
      <div class="bim-services-content">
        <p style="margin-bottom: 20px; color: var(--text-dark);">Approximate Hours: </p>
        <div class="quantity-controls" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 20px;">
          <button class="quantity-btn minus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">-</button>
          <span class="quantity" style="min-width: 30px; text-align: center; font-weight: 500;">1</span>
          <button class="quantity-btn plus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">+</button>
        </div>
        <div class="bim-services-actions">
          <button class="add-to-cart-btn" style="background: var(--primary-green); color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Engineering Services Time and Material Modal -->
  <div class="modal" id="enggTimeMaterialModal">
    <div class="modal-content" style="max-width: 500px;">
      <span class="close-modal">&times;</span>
      <h2 class="modal-title">Engineering Services - Time and Material</h2>
      <div class="bim-services-content">
        <p style="margin-bottom: 20px; color: var(--text-dark);">No. of Approx hours</p>
        <div class="quantity-controls" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin: 20px 0;">
          <button class="quantity-btn minus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">-</button>
          <input type="number" class="quantity-input" value="1" min="1" style="width: 60px; text-align: center; padding: 5px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px;">
          <button class="quantity-btn plus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">+</button>
        </div>
        <div class="bim-services-actions">
          <button class="add-to-cart-btn" style="background: var(--primary-green); color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add EBO Software Engineering Modal -->
  <div class="modal" id="eboSoftwareModal">
    <div class="modal-content" style="max-width: 500px;">
      <span class="close-modal">&times;</span>
      <h2 class="modal-title">EBO Software Engineering</h2>
      <div class="bim-services-content">
        <p style="margin-bottom: 20px; color: var(--text-dark);">No. of Approx hours</p>
        <div class="quantity-controls" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin: 20px 0;">
          <button class="quantity-btn minus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">-</button>
          <input type="number" class="quantity-input" value="1" min="1" style="width: 60px; text-align: center; padding: 5px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px;">
          <button class="quantity-btn plus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">+</button>
        </div>
        <div class="bim-services-actions">
          <button class="add-to-cart-btn" style="background: var(--primary-green); color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Graphics Engineering Modal -->
  <div class="modal" id="graphicsEnggModal">
    <div class="modal-content" style="max-width: 500px;">
      <span class="close-modal">&times;</span>
      <h2 class="modal-title">Graphics Engineering</h2>
      <div class="bim-services-content">
        <p style="margin-bottom: 20px; color: var(--text-dark);">No. of Approx hours</p>
        <div class="quantity-controls" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin: 20px 0;">
          <button class="quantity-btn minus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">-</button>
          <input type="number" class="quantity-input" value="1" min="1" style="width: 60px; text-align: center; padding: 5px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px;">
          <button class="quantity-btn plus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">+</button>
        </div>
        <div class="bim-services-actions">
          <button class="add-to-cart-btn" style="background: var(--primary-green); color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Hardware Engineering Modal -->
  <div class="modal" id="hardwareEnggModal">
    <div class="modal-content" style="max-width: 500px;">
      <span class="close-modal">&times;</span>
      <h2 class="modal-title">Hardware Engineering</h2>
      <div class="bim-services-content">
        <p style="margin-bottom: 20px; color: var(--text-dark);">No. of Approx hours</p>
        <div class="quantity-controls" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin: 20px 0;">
          <button class="quantity-btn minus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">-</button>
          <input type="number" class="quantity-input" value="1" min="1" style="width: 60px; text-align: center; padding: 5px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px;">
          <button class="quantity-btn plus" style="background: var(--primary-green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">+</button>
        </div>
        <div class="bim-services-actions">
          <button class="add-to-cart-btn" style="background: var(--primary-green); color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Folders Section -->
  <div class="folders-container" style="padding: 20px; margin: 20px;">
    <h2>Saved Folders</h2>
    <div id="foldersGrid" class="folders-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
      <!-- Folders will be displayed here -->
    </div>
  </div>

  <!-- Folder Contents Modal -->
  <div class="modal" id="folderContentsModal">
    <div class="modal-content" style="max-width: 800px;">
      <span class="close-modal">&times;</span>
      <h2 class="modal-title">Folder Contents</h2>
      <div class="folder-contents">
        <!-- Products will be displayed here -->
      </div>
      <div class="folder-actions" style="margin-top: 20px; text-align: right;">
        <button class="add-all-to-cart-btn" style="background: var(--primary-green); color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
          Add All to Cart
        </button>
      </div>
    </div>
  </div>

  <!-- Add modal template -->
  <div id="folderModal" class="modal">
    <div class="modal-content">
        <button class="close-modal">&times;</button>
        <h2 id="modalFolderName"></h2>
        <div id="modalProducts" class="modal-products"></div>
    </div>
  </div>

  <script>
    // Initialize cart from localStorage
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    // Display folders when page loads
    displayFolders();

    async function displayFolders() {
        try {
            // Fetch both folders and products from the API
            const [foldersResponse, productsResponse] = await Promise.all([
                fetch('http://localhost:3000/api/folders'),
                fetch('http://localhost:3000/api/products')
            ]);
            
            if (!foldersResponse.ok || !productsResponse.ok) {
                throw new Error('Failed to fetch data from server');
            }
            
            const folders = await foldersResponse.json();
            const products = await productsResponse.json();
            const foldersGrid = document.getElementById('foldersGrid');
            
            foldersGrid.innerHTML = '';
            foldersGrid.className = 'folder-grid';
            
            if (folders.length === 0) {
                foldersGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 20px;">No folders found. Create folders in the admin panel.</div>';
                return;
            }

            folders.forEach(folder => {
                console.log('Processing folder:', folder);
                const folderProducts = products.filter(p => {
                    console.log('Checking product:', p.Title, 'FolderId:', p.FolderId, 'against folder.id:', folder.id);
                    return p.FolderId === folder.id;
                });
                console.log(`Found ${folderProducts.length} products in folder ${folder.name}`);
                const folderCard = document.createElement('div');
                folderCard.className = 'folder-card';
                folderCard.onclick = () => showFolderModal(folder, folderProducts);
                
                folderCard.innerHTML = `
                    <div class="folder-header">
                        <h3 class="folder-title">${folder.name}</h3>
                        <span class="folder-count">${folderProducts.length} items</span>
                    </div>
                    ${folderProducts.length > 0 ? `
                        <div class="folder-preview">
                            ${folderProducts.slice(0, 3).map(product => `
                                <div class="product-item" style="display: flex; align-items: center; margin: 5px 0;">
                                    <img src="data:${product.ImageContentType};base64,${arrayBufferToBase64(product.ImageData)}" 
                                         alt="${product.Title}" 
                                         style="width: 50px; height: 50px; object-fit: cover; margin-right: 10px;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: bold;">${product.Title}</div>
                                        <div style="color: #666; font-size: 0.9em;">${product.Hours} hrs</div>
                                    </div>
                                </div>
                            `).join('')}
                            ${folderProducts.length > 3 ? `
                                <div style="text-align: center; color: #666; margin-top: 10px;">
                                    +${folderProducts.length - 3} more items
                                </div>
                            ` : ''}
                        </div>
                    ` : `
                        <div class="folder-placeholder">
                            <i class="fas fa-folder-open" style="font-size: 24px; margin-right: 10px;"></i>
                            Empty Folder
                        </div>
                    `}
                `;
                
                foldersGrid.appendChild(folderCard);
            });
        } catch (error) {
            console.error('Error loading folders:', error);
            const foldersGrid = document.getElementById('foldersGrid');
            foldersGrid.innerHTML = '<div style="color: #dc3545; text-align: center; padding: 20px;">Error loading folders. Please try again later.</div>';
        }
    }

    function showFolderModal(folder, products) {
        const modal = document.getElementById('folderModal');
        const modalFolderName = document.getElementById('modalFolderName');
        const modalProducts = document.getElementById('modalProducts');
        
        modalFolderName.textContent = folder.name;
        modalProducts.innerHTML = products.length > 0 ? products.map(product => `
            <div class="modal-product">
                <img src="data:${product.ImageContentType};base64,${arrayBufferToBase64(product.ImageData)}" 
                     alt="${product.Title}">
                <div class="product-title">${product.Title}</div>
                <div class="product-hours">${product.Hours} hrs</div>
                <button class="btn-add-to-cart" onclick="addToCart(${JSON.stringify(product)})">
                    Add to Cart
                </button>
            </div>
        `).join('') : '<div style="text-align: center; padding: 20px;">No products in this folder.</div>';
        
        modal.style.display = 'block';
    }

    function arrayBufferToBase64(buffer) {
        if (!buffer) return '';
        let binary = '';
        const bytes = new Uint8Array(buffer);
        for (let i = 0; i < bytes.byteLength; i++) {
            binary += String.fromCharCode(bytes[i]);
        }
        return btoa(binary);
    }

    function addToCart(product) {
        const existingItem = cart.find(item => item.Id === product.Id);
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({
                ...product,
                quantity: 1
            });
        }
        localStorage.setItem('cart', JSON.stringify(cart));
        alert('Product added to cart!');
    }

    // Close modal when clicking the close button or outside the modal
    document.querySelector('.close-modal').onclick = function() {
        document.getElementById('folderModal').style.display = 'none';
    }

    window.onclick = function(event) {
        const modal = document.getElementById('folderModal');
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    }
  </script>
</body>
</html>